# ===========================================
# Production Environment Configuration
# ===========================================
# Usage: docker compose -f docker-compose.yml -f docker-compose.prod.yml --env-file .env.prod up -d
# Or: ln -sf .env.prod .env && docker compose -f docker-compose.yml -f docker-compose.prod.yml up -d

# ---- Application ----
# IMPORTANT: Change this to a strong random secret!
SECRET_KEY=CHANGE_ME_TO_A_STRONG_RANDOM_SECRET_IN_PRODUCTION

# CORS origins (comma-separated, or leave empty if frontend serves from same origin)
CORS_ORIGINS=

# ---- Frontend (Vite) ----
# Use relative path when served from same origin via Nginx
VITE_API_BASE=/api

# ---- Database (PostgreSQL for production) ----
POSTGRES_DB=sidebyside
POSTGRES_USER=app
POSTGRES_PASSWORD=MyStr0ngP@ssw0rd2025

# Constructed from above (@ in password is URL-encoded as %40)
DATABASE_URL=postgresql+psycopg2://app:MyStr0ngP%40ssw0rd2025@db:5432/sidebyside

# ---- Logging Configuration (Unified Logging System) ----
# Log level: DEBUG | INFO | WARNING | ERROR | CRITICAL
LOG_LEVEL=INFO

# Log format: text (colored, human-readable) | json (machine-readable for aggregation)
LOG_FORMAT=json

# Log file path (optional, recommended for production)
LOG_FILE_PATH=/app/logs/app.log

# Log rotation size in bytes (default: 10MB)
LOG_ROTATION_SIZE=10485760

# Log rotation backup count (default: 5)
LOG_ROTATION_COUNT=10

# ---- LLM Provider (DashScope/Qwen) ----
LLM_PROVIDER=qwen
DASHSCOPE_API_KEY=sk-1e631a8dda5f46cba0ef26a6bf1dcbd1
DASHSCOPE_BASE_URL=https://dashscope.aliyuncs.com/api/v1
MODEL_NAME=qwen3-vl-plus
VISION_MODEL=qwen3-vl-plus
TEXT_MODEL=qwen3-max-preview

# LLM Parameters
ENABLE_THINKING=true
THINKING_BUDGET=50
LLM_TEMPERATURE=0.7
LLM_TOP_P=0.9
LLM_MAX_TOKENS=2000

# ---- LLM Judge (Semantic Definition Grading) ----
# Enable semantic fallback for Englishâ†’Chinese grading
USE_LLM_JUDGE_EN2ZH=1

# Strictness: low | medium | high (default: medium)
LLM_JUDGE_STRICTNESS=medium

# Treat "partial" verdict as correct
LLM_JUDGE_TREAT_PARTIAL_AS_CORRECT=0

# ---- Legacy Logging (Backward Compatibility) ----
# Agent log level (will be overridden by LOG_LEVEL)
AGENT_LOG_LEVEL=INFO

# Disable LLM debug mode in production
LLM_DEBUG=0

# ---- LangSmith Tracing (Optional) ----
# Uncomment to enable LangSmith tracing in production
# LANGSMITH_ENABLED=1
# LANGCHAIN_TRACING_V2=1
# LANGCHAIN_API_KEY=your_production_langsmith_key
# LANGCHAIN_PROJECT=SideBySide-Prod
